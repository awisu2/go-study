# pointer-behavior

いくつかのタイプでの引数の参照状態の挙動をチェック

- array/slice: ポインタ、実態のどちらでも、参照渡しとして扱われる
- struct: ポインタ渡しのときにのみ参照として扱われる。関数からの返却でも同じ
- int, string: ポインタ渡しのときにのみ参照として扱われる。

Note: 「ポインタ」、「参照」、「実態」やらの単語を使ってますが用語を知らないため。ニュアンスで見てください

## 考察

- 参照渡しとか言っているが、実際はアドレスの"コピー"を渡している
  - 配列が実態渡しの挙動になっているのはそのため
  - struct が参照にならないのは class ではないという、いい実例かもしれない
- 関数からの返却でもルールは変わらない
- 運用について
  - singleton や、何らかのインスタンスを保持して運用する場合気をつける
    - 自前のインスタンスは実態で、返却や引き渡しの場合は参照にする(もちろん用途による)
  - 基本ルールとして、宣言、生成時：実態、引数で渡す場合：参照 が良さそう
    - よほどでなければ最初の宣言以外は参照で運用すれば良い
